{"remainingRequest":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js!/home/clockwise/programming/clone-banking/src/use/login-form.js","dependencies":[{"path":"/home/clockwise/programming/clone-banking/src/use/login-form.js","mtime":1710058175665},{"path":"/home/clockwise/programming/clone-banking/babel.config.js","mtime":1710058175653},{"path":"/home/clockwise/programming/clone-banking/node_modules/cache-loader/dist/cjs.js","mtime":1710063058123},{"path":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js","mtime":1710063059827}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHVzZUZpZWxkLCB1c2VGb3JtIH0gZnJvbSAidmVlLXZhbGlkYXRlIjsKaW1wb3J0ICogYXMgeXVwIGZyb20gInl1cCI7CmltcG9ydCB7IGNvbXB1dGVkLCB3YXRjaCB9IGZyb20gInZ1ZSI7CmltcG9ydCB7IHVzZVN0b3JlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwpleHBvcnQgZnVuY3Rpb24gdXNlTG9naW5Gb3JtKCkgewogIGNvbnN0IHN0b3JlID0gdXNlU3RvcmUoKTsKICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTsKICBjb25zdCB7CiAgICBoYW5kbGVTdWJtaXQsCiAgICBpc1N1Ym1pdHRpbmcsCiAgICBzdWJtaXRDb3VudAogIH0gPSB1c2VGb3JtKCk7CiAgY29uc3QgewogICAgdmFsdWU6IGVtYWlsLAogICAgZXJyb3JNZXNzYWdlOiBlRXJyb3IsCiAgICBoYW5kbGVCbHVyOiBlQmx1cgogIH0gPSB1c2VGaWVsZCgnZW1haWwnLCB5dXAuc3RyaW5nKCkudHJpbSgpLnJlcXVpcmVkKCfQn9C+0LbQsNC70YPQudGB0YLQsCDQstCy0LXQtNC40YLQtSBlbWFpbCcpLmVtYWlsKCfQndC10L7QsdGF0L7QtNC40LzQviDQstCy0LXRgdGC0Lgg0LrQvtGA0YDQtdC60YLQvdGL0LkgZW1haWwnKSk7CiAgY29uc3QgTUlOX0xFTkdUSCA9IDY7CiAgY29uc3QgewogICAgdmFsdWU6IHBhc3N3b3JkLAogICAgZXJyb3JNZXNzYWdlOiBwRXJyb3IsCiAgICBoYW5kbGVCbHVyOiBwQmx1cgogIH0gPSB1c2VGaWVsZCgncGFzc3dvcmQnLCB5dXAuc3RyaW5nKCkudHJpbSgpLnJlcXVpcmVkKCfQn9C+0LbQsNC70YPQudGB0YLQsCDQstCy0LXQtNC40YLQtSDQv9Cw0YDQvtC70YwnKS5taW4oTUlOX0xFTkdUSCwgYNCf0LDRgNC+0LvRjCDQvdC1INC80L7QttC10YIg0LHRi9GC0Ywg0LzQtdC90YzRiNC1ICR7TUlOX0xFTkdUSH0g0YHQuNC80LLQvtC70L7QsmApKTsKICBjb25zdCBpc1Rvb01hbnlBdHRlbXB0cyA9IGNvbXB1dGVkKCgpID0+IHN1Ym1pdENvdW50LnZhbHVlID49IDMpOwogIHdhdGNoKGlzVG9vTWFueUF0dGVtcHRzLCB2YWwgPT4gewogICAgaWYgKHZhbCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHN1Ym1pdENvdW50LnZhbHVlID0gMCwgMTUwMCk7CiAgICB9CiAgfSk7CiAgY29uc3Qgb25TdWJtaXQgPSBoYW5kbGVTdWJtaXQoYXN5bmMgdmFsdWVzID0+IHsKICAgIC8vICBjb25zb2xlLmxvZygnRm9ybTogJywgdmFsdWVzKQogICAgdHJ5IHsKICAgICAgYXdhaXQgc3RvcmUuZGlzcGF0Y2goJ2F1dGgvbG9naW4nLCB2YWx1ZXMpOwogICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgfSBjYXRjaCAoZSkge30KICB9KTsKICByZXR1cm4gewogICAgZW1haWwsCiAgICBwYXNzd29yZCwKICAgIGVFcnJvciwKICAgIHBFcnJvciwKICAgIGVCbHVyLAogICAgcEJsdXIsCiAgICBvblN1Ym1pdCwKICAgIGlzU3VibWl0dGluZywKICAgIGlzVG9vTWFueUF0dGVtcHRzCiAgfTsKfQ=="},{"version":3,"names":["useField","useForm","yup","computed","watch","useStore","useRouter","useLoginForm","store","router","handleSubmit","isSubmitting","submitCount","value","email","errorMessage","eError","handleBlur","eBlur","string","trim","required","MIN_LENGTH","password","pError","pBlur","min","isTooManyAttempts","val","setTimeout","onSubmit","values","dispatch","push","e"],"sources":["/home/clockwise/programming/clone-banking/src/use/login-form.js"],"sourcesContent":["import {useField, useForm} from \"vee-validate\";\r\nimport * as yup from \"yup\";\r\nimport {computed, watch} from \"vue\";\r\nimport {useStore} from 'vuex'\r\nimport {useRouter} from 'vue-router'\r\n\r\nexport function useLoginForm(){\r\n\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const {handleSubmit, isSubmitting, submitCount} = useForm()\r\n\r\n    const {value: email, errorMessage: eError, handleBlur: eBlur} = useField(\r\n        'email',\r\n        yup.string().trim().required('Пожалуйста введите email').email('Необходимо ввести корректный email')\r\n    )\r\n\r\n    const MIN_LENGTH = 6\r\n\r\n    const {value: password, errorMessage: pError, handleBlur: pBlur} = useField(\r\n        'password',\r\n        yup.string().trim().required('Пожалуйста введите пароль')\r\n            .min(MIN_LENGTH, `Пароль не может быть меньше ${MIN_LENGTH} символов`)\r\n    )\r\n\r\n    const isTooManyAttempts = computed(() => submitCount.value >= 3)\r\n\r\n    watch(isTooManyAttempts, val => {\r\n        if(val){\r\n            setTimeout(() => submitCount.value = 0, 1500)\r\n        }\r\n    })\r\n\r\n    const onSubmit = handleSubmit(async values => {\r\n      //  console.log('Form: ', values)\r\n        try {\r\n            await store.dispatch('auth/login', values)\r\n            router.push('/')\r\n        }catch (e){\r\n\r\n        }\r\n\r\n    })\r\n\r\n    return {\r\n        email,\r\n        password,\r\n        eError,\r\n        pError,\r\n        eBlur,\r\n        pBlur,\r\n        onSubmit,\r\n        isSubmitting,\r\n        isTooManyAttempts\r\n    }\r\n}"],"mappings":";AAAA,SAAQA,QAAQ,EAAEC,OAAO,QAAO,cAAc;AAC9C,OAAO,KAAKC,GAAG,MAAM,KAAK;AAC1B,SAAQC,QAAQ,EAAEC,KAAK,QAAO,KAAK;AACnC,SAAQC,QAAQ,QAAO,MAAM;AAC7B,SAAQC,SAAS,QAAO,YAAY;AAEpC,OAAO,SAASC,YAAYA,CAAA,EAAE;EAE1B,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;EACxB,MAAMI,MAAM,GAAGH,SAAS,CAAC,CAAC;EAC1B,MAAM;IAACI,YAAY;IAAEC,YAAY;IAAEC;EAAW,CAAC,GAAGX,OAAO,CAAC,CAAC;EAE3D,MAAM;IAACY,KAAK,EAAEC,KAAK;IAAEC,YAAY,EAAEC,MAAM;IAAEC,UAAU,EAAEC;EAAK,CAAC,GAAGlB,QAAQ,CACpE,OAAO,EACPE,GAAG,CAACiB,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,0BAA0B,CAAC,CAACP,KAAK,CAAC,oCAAoC,CACvG,CAAC;EAED,MAAMQ,UAAU,GAAG,CAAC;EAEpB,MAAM;IAACT,KAAK,EAAEU,QAAQ;IAAER,YAAY,EAAES,MAAM;IAAEP,UAAU,EAAEQ;EAAK,CAAC,GAAGzB,QAAQ,CACvE,UAAU,EACVE,GAAG,CAACiB,MAAM,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAAC,2BAA2B,CAAC,CACpDK,GAAG,CAACJ,UAAU,EAAG,+BAA8BA,UAAW,WAAU,CAC7E,CAAC;EAED,MAAMK,iBAAiB,GAAGxB,QAAQ,CAAC,MAAMS,WAAW,CAACC,KAAK,IAAI,CAAC,CAAC;EAEhET,KAAK,CAACuB,iBAAiB,EAAEC,GAAG,IAAI;IAC5B,IAAGA,GAAG,EAAC;MACHC,UAAU,CAAC,MAAMjB,WAAW,CAACC,KAAK,GAAG,CAAC,EAAE,IAAI,CAAC;IACjD;EACJ,CAAC,CAAC;EAEF,MAAMiB,QAAQ,GAAGpB,YAAY,CAAC,MAAMqB,MAAM,IAAI;IAC5C;IACE,IAAI;MACA,MAAMvB,KAAK,CAACwB,QAAQ,CAAC,YAAY,EAAED,MAAM,CAAC;MAC1CtB,MAAM,CAACwB,IAAI,CAAC,GAAG,CAAC;IACpB,CAAC,QAAOC,CAAC,EAAC,CAEV;EAEJ,CAAC,CAAC;EAEF,OAAO;IACHpB,KAAK;IACLS,QAAQ;IACRP,MAAM;IACNQ,MAAM;IACNN,KAAK;IACLO,KAAK;IACLK,QAAQ;IACRnB,YAAY;IACZgB;EACJ,CAAC;AACL","ignoreList":[]}]}