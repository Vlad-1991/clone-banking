{"remainingRequest":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js!/home/clockwise/programming/clone-banking/src/store/modules/auth.module.js","dependencies":[{"path":"/home/clockwise/programming/clone-banking/src/store/modules/auth.module.js","mtime":1710058175665},{"path":"/home/clockwise/programming/clone-banking/babel.config.js","mtime":1710058175653},{"path":"/home/clockwise/programming/clone-banking/node_modules/cache-loader/dist/cjs.js","mtime":1710063058123},{"path":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js","mtime":1710063059827}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgeyBlcnJvciB9IGZyb20gJy4uLy4uLy4uL3V0aWxzL2Vycm9yJzsKY29uc3QgVE9LRU5fS0VZID0gJ2p3dC10b2tlbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlKCkgewogICAgcmV0dXJuIHsKICAgICAgdG9rZW46IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFRPS0VOX0tFWSkKICAgIH07CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIHNldFRva2VuKHN0YXRlLCB0b2tlbikgewogICAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShUT0tFTl9LRVksIHRva2VuKTsKICAgIH0sCiAgICBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudG9rZW4gPSBudWxsOwogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShUT0tFTl9LRVkpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgYXN5bmMgbG9naW4oewogICAgICBjb21taXQsCiAgICAgIGRpc3BhdGNoCiAgICB9LCBwYXlsb2FkKSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdXJsID0gYGh0dHBzOi8vaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tL3YxL2FjY291bnRzOnNpZ25JbldpdGhQYXNzd29yZD9rZXk9JHtwcm9jZXNzLmVudi5WVUVfQVBQX0ZCX0tFWX1gOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGRhdGEKICAgICAgICB9ID0gYXdhaXQgYXhpb3MucG9zdCh1cmwsIHsKICAgICAgICAgIC4uLnBheWxvYWQsCiAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZQogICAgICAgIH0pOwogICAgICAgIGNvbW1pdCgnc2V0VG9rZW4nLCBkYXRhLmlkVG9rZW4pOwogICAgICAgIGNvbW1pdCgnY2xlYXJNZXNzYWdlJywgbnVsbCwgewogICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgZGlzcGF0Y2goJ3NldE1lc3NhZ2UnLCB7CiAgICAgICAgICB2YWx1ZTogZXJyb3IoZS5yZXNwb25zZS5kYXRhLmVycm9yLm1lc3NhZ2UpLAogICAgICAgICAgdHlwZTogJ2RhbmdlcicKICAgICAgICB9LCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7CiAgICAgIH0KICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBpc0F1dGhlbnRpZmljYXRlZChfLCBnZXR0ZXJzKSB7CiAgICAgIHJldHVybiAhIWdldHRlcnMudG9rZW47CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["axios","error","TOKEN_KEY","namespaced","state","token","localStorage","getItem","mutations","setToken","setItem","logout","removeItem","actions","login","commit","dispatch","payload","url","process","env","VUE_APP_FB_KEY","data","post","returnSecureToken","idToken","root","e","value","response","message","type","Error","getters","isAuthentificated","_"],"sources":["/home/clockwise/programming/clone-banking/src/store/modules/auth.module.js"],"sourcesContent":["import axios from \"axios\";\r\nimport {error} from '../../../utils/error'\r\nconst TOKEN_KEY = 'jwt-token'\r\n\r\nexport default {\r\n    namespaced: true,\r\n    state(){\r\n        return {\r\n            token: localStorage.getItem(TOKEN_KEY)\r\n        }\r\n    },\r\n    mutations: {\r\n        setToken(state, token){\r\n            state.token = token\r\n            localStorage.setItem(TOKEN_KEY, token)\r\n        },\r\n        logout(state){\r\n            state.token = null\r\n            localStorage.removeItem(TOKEN_KEY)\r\n        }\r\n    },\r\n    actions: {\r\n      async login({ commit, dispatch }, payload){\r\n          try{\r\n              const url = `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${process.env.VUE_APP_FB_KEY}`\r\n              const {data} = await axios.post(url, {...payload, returnSecureToken: true})\r\n              commit('setToken', data.idToken)\r\n              commit('clearMessage', null, {root: true})\r\n          }catch (e){\r\n              dispatch('setMessage', {\r\n                  value: error(e.response.data.error.message),\r\n                  type: 'danger'\r\n          }, {root: true})\r\n              throw new Error()\r\n          }\r\n      }\r\n    },\r\n    getters: {\r\n        token(state){\r\n            return state.token\r\n        },\r\n        isAuthentificated(_, getters){\r\n            return !!getters.token\r\n        }\r\n    }\r\n}"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,KAAK,QAAO,sBAAsB;AAC1C,MAAMC,SAAS,GAAG,WAAW;AAE7B,eAAe;EACXC,UAAU,EAAE,IAAI;EAChBC,KAAKA,CAAA,EAAE;IACH,OAAO;MACHC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAACL,SAAS;IACzC,CAAC;EACL,CAAC;EACDM,SAAS,EAAE;IACPC,QAAQA,CAACL,KAAK,EAAEC,KAAK,EAAC;MAClBD,KAAK,CAACC,KAAK,GAAGA,KAAK;MACnBC,YAAY,CAACI,OAAO,CAACR,SAAS,EAAEG,KAAK,CAAC;IAC1C,CAAC;IACDM,MAAMA,CAACP,KAAK,EAAC;MACTA,KAAK,CAACC,KAAK,GAAG,IAAI;MAClBC,YAAY,CAACM,UAAU,CAACV,SAAS,CAAC;IACtC;EACJ,CAAC;EACDW,OAAO,EAAE;IACP,MAAMC,KAAKA,CAAC;MAAEC,MAAM;MAAEC;IAAS,CAAC,EAAEC,OAAO,EAAC;MACtC,IAAG;QACC,MAAMC,GAAG,GAAI,6EAA4EC,OAAO,CAACC,GAAG,CAACC,cAAe,EAAC;QACrH,MAAM;UAACC;QAAI,CAAC,GAAG,MAAMtB,KAAK,CAACuB,IAAI,CAACL,GAAG,EAAE;UAAC,GAAGD,OAAO;UAAEO,iBAAiB,EAAE;QAAI,CAAC,CAAC;QAC3ET,MAAM,CAAC,UAAU,EAAEO,IAAI,CAACG,OAAO,CAAC;QAChCV,MAAM,CAAC,cAAc,EAAE,IAAI,EAAE;UAACW,IAAI,EAAE;QAAI,CAAC,CAAC;MAC9C,CAAC,QAAOC,CAAC,EAAC;QACNX,QAAQ,CAAC,YAAY,EAAE;UACnBY,KAAK,EAAE3B,KAAK,CAAC0B,CAAC,CAACE,QAAQ,CAACP,IAAI,CAACrB,KAAK,CAAC6B,OAAO,CAAC;UAC3CC,IAAI,EAAE;QACd,CAAC,EAAE;UAACL,IAAI,EAAE;QAAI,CAAC,CAAC;QACZ,MAAM,IAAIM,KAAK,CAAC,CAAC;MACrB;IACJ;EACF,CAAC;EACDC,OAAO,EAAE;IACL5B,KAAKA,CAACD,KAAK,EAAC;MACR,OAAOA,KAAK,CAACC,KAAK;IACtB,CAAC;IACD6B,iBAAiBA,CAACC,CAAC,EAAEF,OAAO,EAAC;MACzB,OAAO,CAAC,CAACA,OAAO,CAAC5B,KAAK;IAC1B;EACJ;AACJ,CAAC","ignoreList":[]}]}