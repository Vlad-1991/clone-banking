{"remainingRequest":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js!/home/clockwise/programming/clone-banking/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/clockwise/programming/clone-banking/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/home/clockwise/programming/clone-banking/src/views/Request.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/clockwise/programming/clone-banking/src/views/Request.vue","mtime":1710058175665},{"path":"/home/clockwise/programming/clone-banking/babel.config.js","mtime":1710058175653},{"path":"/home/clockwise/programming/clone-banking/node_modules/cache-loader/dist/cjs.js","mtime":1710063058123},{"path":"/home/clockwise/programming/clone-banking/node_modules/babel-loader/lib/index.js","mtime":1710063059827},{"path":"/home/clockwise/programming/clone-banking/node_modules/cache-loader/dist/cjs.js","mtime":1710063058123},{"path":"/home/clockwise/programming/clone-banking/node_modules/vue-loader-v16/dist/index.js","mtime":1710063059003}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHVzZVJvdXRlLCB1c2VSb3V0ZXIgfSBmcm9tICJ2dWUtcm91dGVyIjsKaW1wb3J0IEFwcFBhZ2UgZnJvbSAiQC9jb21wb25lbnRzL3VpL0FwcFBhZ2UudnVlIjsKaW1wb3J0IHsgcmVmLCBvbk1vdW50ZWQsIGNvbXB1dGVkIH0gZnJvbSAidnVlIjsKaW1wb3J0IHsgdXNlU3RvcmUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEFwcExvYWRlciBmcm9tICJAL2NvbXBvbmVudHMvdWkvQXBwTG9hZGVyLnZ1ZSI7CmltcG9ydCBBcHBTdGF0dXMgZnJvbSAiQC9jb21wb25lbnRzL3VpL0FwcFN0YXR1cy52dWUiOwppbXBvcnQgeyBjdXJyZW5jeSB9IGZyb20gIi4uLy4uL3V0aWxzL2N1cnJlbmN5IjsKZXhwb3J0IGRlZmF1bHQgewogIHNldHVwKCkgewogICAgY29uc3QgbG9hZGluZyA9IHJlZih0cnVlKTsKICAgIGNvbnN0IHJvdXRlID0gdXNlUm91dGUoKTsKICAgIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgY29uc3Qgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgY29uc3Qgc3RhdHVzID0gcmVmKCk7CiAgICBjb25zdCByZXF1ZXN0ID0gcmVmKHt9KTsKICAgIG9uTW91bnRlZChhc3luYyAoKSA9PiB7CiAgICAgIHZhciBfcmVxdWVzdCR2YWx1ZTsKICAgICAgbG9hZGluZy52YWx1ZSA9IHRydWU7CiAgICAgIHJlcXVlc3QudmFsdWUgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaCgncmVxdWVzdC9sb2FkQnlJZCcsIHJvdXRlLnBhcmFtcy5pZCk7CiAgICAgIHN0YXR1cy52YWx1ZSA9IChfcmVxdWVzdCR2YWx1ZSA9IHJlcXVlc3QudmFsdWUpID09PSBudWxsIHx8IF9yZXF1ZXN0JHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVxdWVzdCR2YWx1ZS5zdGF0dXM7CiAgICAgIGxvYWRpbmcudmFsdWUgPSBmYWxzZTsKICAgIH0pOwogICAgY29uc3QgaGFzQ2hhbmdlcyA9IGNvbXB1dGVkKCgpID0+IHJlcXVlc3QudmFsdWUuc3RhdHVzICE9PSBzdGF0dXMudmFsdWUpOwogICAgY29uc3QgcmVtb3ZlID0gYXN5bmMgKCkgPT4gewogICAgICBhd2FpdCBzdG9yZS5kaXNwYXRjaCgncmVxdWVzdC9yZW1vdmUnLCByb3V0ZS5wYXJhbXMuaWQpOwogICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgfTsKICAgIGNvbnN0IHVwZGF0ZSA9IGFzeW5jICgpID0+IHsKICAgICAgY29uc3QgZGF0YSA9IHsKICAgICAgICAuLi5yZXF1ZXN0LnZhbHVlLAogICAgICAgIHN0YXR1czogc3RhdHVzLnZhbHVlLAogICAgICAgIGlkOiByb3V0ZS5wYXJhbXMuaWQKICAgICAgfTsKICAgICAgYXdhaXQgc3RvcmUuZGlzcGF0Y2goJ3JlcXVlc3QvdXBkYXRlJywgZGF0YSk7CiAgICAgIHJlcXVlc3QudmFsdWUuc3RhdHVzID0gc3RhdHVzLnZhbHVlOwogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmcsCiAgICAgIHJlcXVlc3QsCiAgICAgIGlkOiByb3V0ZS5wYXJhbXMuaWQsCiAgICAgIGN1cnJlbmN5LAogICAgICByZW1vdmUsCiAgICAgIHVwZGF0ZSwKICAgICAgc3RhdHVzLAogICAgICBoYXNDaGFuZ2VzCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgQXBwUGFnZSwKICAgIEFwcExvYWRlciwKICAgIEFwcFN0YXR1cwogIH0KfTs="},{"version":3,"names":["useRoute","useRouter","AppPage","ref","onMounted","computed","useStore","AppLoader","AppStatus","currency","setup","loading","route","router","store","status","request","_request$value","value","dispatch","params","id","hasChanges","remove","push","update","data","components"],"sources":["/home/clockwise/programming/clone-banking/src/views/Request.vue"],"sourcesContent":["<template>\r\n  <app-loader v-if=\"loading\"></app-loader>\r\n  <app-page title=\"Заявка\" v-else-if=\"request\" back>\r\n    <p><strong>Имя владельца</strong>: {{request.fio}}</p>\r\n    <p><strong>Телефон</strong>: {{request.phone}}</p>\r\n    <p><strong>Сумма</strong>: {{currency(request.amount)}}</p>\r\n    <p><strong>Статус</strong>: <app-status :type=\"request.status\"></app-status></p>\r\n\r\n    <div class=\"form-control\">\r\n      <label for=\"status\">Статус</label>\r\n      <select id=\"status\" v-model=\"status\">\r\n        <option value=\"done\">Завершен</option>\r\n        <option value=\"cancelled\">Отменен</option>\r\n        <option value=\"active\">Активен</option>\r\n        <option value=\"pending\">Выполняется</option>\r\n      </select>\r\n    </div>\r\n\r\n    <button class=\"btn danger\" @click=\"remove\">Удалить</button>\r\n    <button class=\"btn\" @click=\"update\" v-if=\"hasChanges\">Обновить</button>\r\n  </app-page>\r\n  <h3 v-else class=\"text-center text-white\">\r\n    Заявки с ID = {{id}} нет.\r\n  </h3>\r\n</template>\r\n\r\n<script>\r\nimport {useRoute, useRouter} from \"vue-router\";\r\nimport AppPage from \"@/components/ui/AppPage.vue\";\r\nimport {ref, onMounted, computed} from \"vue\";\r\nimport {useStore} from \"vuex\";\r\nimport AppLoader from \"@/components/ui/AppLoader.vue\";\r\nimport AppStatus from \"@/components/ui/AppStatus.vue\";\r\nimport {currency} from \"../../utils/currency\";\r\n\r\nexport default {\r\n  setup(){\r\n    const loading = ref(true)\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const store = useStore()\r\n    const status = ref()\r\n    const request = ref({})\r\n\r\n    onMounted(async () => {\r\n      loading.value = true\r\n      request.value = await store.dispatch('request/loadById', route.params.id)\r\n      status.value = request.value?.status\r\n      loading.value = false\r\n    })\r\n\r\n    const hasChanges = computed(() => request.value.status !== status.value)\r\n\r\n    const remove = async () => {\r\n      await store.dispatch('request/remove', route.params.id)\r\n      router.push('/')\r\n    }\r\n\r\n    const update = async () => {\r\n      const data = {...request.value, status: status.value, id: route.params.id}\r\n      await store.dispatch('request/update', data)\r\n      request.value.status = status.value\r\n    }\r\n\r\n    return {loading, request, id: route.params.id, currency, remove, update, status, hasChanges}\r\n  },\r\n  components: {AppPage, AppLoader, AppStatus}\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n</style>"],"mappings":";AA2BA,SAAQA,QAAQ,EAAEC,SAAS,QAAO,YAAY;AAC9C,OAAOC,OAAM,MAAO,6BAA6B;AACjD,SAAQC,GAAG,EAAEC,SAAS,EAAEC,QAAQ,QAAO,KAAK;AAC5C,SAAQC,QAAQ,QAAO,MAAM;AAC7B,OAAOC,SAAQ,MAAO,+BAA+B;AACrD,OAAOC,SAAQ,MAAO,+BAA+B;AACrD,SAAQC,QAAQ,QAAO,sBAAsB;AAE7C,eAAe;EACbC,KAAKA,CAAA,EAAE;IACL,MAAMC,OAAM,GAAIR,GAAG,CAAC,IAAI;IACxB,MAAMS,KAAI,GAAIZ,QAAQ,CAAC;IACvB,MAAMa,MAAK,GAAIZ,SAAS,CAAC;IACzB,MAAMa,KAAI,GAAIR,QAAQ,CAAC;IACvB,MAAMS,MAAK,GAAIZ,GAAG,CAAC;IACnB,MAAMa,OAAM,GAAIb,GAAG,CAAC,CAAC,CAAC;IAEtBC,SAAS,CAAC,YAAY;MAAA,IAAAa,cAAA;MACpBN,OAAO,CAACO,KAAI,GAAI,IAAG;MACnBF,OAAO,CAACE,KAAI,GAAI,MAAMJ,KAAK,CAACK,QAAQ,CAAC,kBAAkB,EAAEP,KAAK,CAACQ,MAAM,CAACC,EAAE;MACxEN,MAAM,CAACG,KAAI,IAAAD,cAAA,GAAID,OAAO,CAACE,KAAK,cAAAD,cAAA,uBAAbA,cAAA,CAAeF,MAAK;MACnCJ,OAAO,CAACO,KAAI,GAAI,KAAI;IACtB,CAAC;IAED,MAAMI,UAAS,GAAIjB,QAAQ,CAAC,MAAMW,OAAO,CAACE,KAAK,CAACH,MAAK,KAAMA,MAAM,CAACG,KAAK;IAEvE,MAAMK,MAAK,GAAI,MAAAA,CAAA,KAAY;MACzB,MAAMT,KAAK,CAACK,QAAQ,CAAC,gBAAgB,EAAEP,KAAK,CAACQ,MAAM,CAACC,EAAE;MACtDR,MAAM,CAACW,IAAI,CAAC,GAAG;IACjB;IAEA,MAAMC,MAAK,GAAI,MAAAA,CAAA,KAAY;MACzB,MAAMC,IAAG,GAAI;QAAC,GAAGV,OAAO,CAACE,KAAK;QAAEH,MAAM,EAAEA,MAAM,CAACG,KAAK;QAAEG,EAAE,EAAET,KAAK,CAACQ,MAAM,CAACC;MAAE;MACzE,MAAMP,KAAK,CAACK,QAAQ,CAAC,gBAAgB,EAAEO,IAAI;MAC3CV,OAAO,CAACE,KAAK,CAACH,MAAK,GAAIA,MAAM,CAACG,KAAI;IACpC;IAEA,OAAO;MAACP,OAAO;MAAEK,OAAO;MAAEK,EAAE,EAAET,KAAK,CAACQ,MAAM,CAACC,EAAE;MAAEZ,QAAQ;MAAEc,MAAM;MAAEE,MAAM;MAAEV,MAAM;MAAEO;IAAU;EAC7F,CAAC;EACDK,UAAU,EAAE;IAACzB,OAAO;IAAEK,SAAS;IAAEC;EAAS;AAC5C","ignoreList":[]}]}